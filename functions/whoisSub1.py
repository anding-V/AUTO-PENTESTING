import whois as checkdomain
import socket
from colorama import Fore, Style


def whois_query(input_value):
    print(Style.BRIGHT + "\n\n===================================")
    if is_valid_ip(input_value):
        ip_address = input_value
        print(f"Whois lookup for IP Address: {ip_address}")
    else:
        domain = input_value
        print(f"Whois lookup for Domain: {domain}")
        ip_address = resolve_ip(domain)
        print(f"Resolved IP Address: {Fore.GREEN}{ip_address}{Style.RESET_ALL}")

    print("===================================" + Style.RESET_ALL)

    try:
        data = checkdomain.whois(input_value)
        print("\n" + str(data))
    except Exception as e:
        print(Fore.RED + "Error:", str(e) + Style.RESET_ALL)


def resolve_ip(domain):
    ip_address = socket.gethostbyname(domain)
    return ip_address


def is_valid_ip(ip):
    try:
        socket.inet_aton(ip)
        return True
    except socket.error:
        return False

