import whois as checkdomain
import socket


def whois_query(domain):
    display_infos = f"\n\n===================================\n"
    display_infos += f"Whois lookup for {domain}\n"
    display_infos += f"===================================\n"

    try:
        ip_address = resolve_ip(domain)
        display_infos += f"\nIP Address: {ip_address}\n"

        data = checkdomain.whois(domain)
        display_infos += str(data)

        return display_infos
    except Exception as e:
        error = "Error: " + str(e)
        display_infos += error
        return display_infos


def resolve_ip(domain):
    ip_address = socket.gethostbyname(domain)
    return ip_address


